"use strict";

/*加载头尾*/
$('.shops__header').load('./shop-header.html');
$('.shops-footer').load('./shop-footer.html');
/*banner轮播图*/

$(document).ready(function () {
  var shopSwiper = new Swiper('#shops-swiper-1', {
    // direction: 'vertical', // 垂直切换选项
    effect: 'fade',
    loop: true,
    // 循环模式选项
    // 如果需要分页器
    pagination: {
      el: '.swiper-pagination'
    },
    // 如果需要前进后退按钮
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev'
    },
    on: {
      init: function init() {
        swiperAnimateCache(this); //隐藏动画元素

        swiperAnimate(this); //初始化完成开始动画
      },
      slideChangeTransitionEnd: function slideChangeTransitionEnd() {
        swiperAnimate(this); //每个slide切换结束时也运行当前slide动画
        //this.slides.eq(this.activeIndex).find('.ani').removeClass('ani'); 动画只展现一次，去除ani类名
      }
    }
  });
});
/*banner轮播图*/

/*商品列表自动创建*/

ajax({
  "data": "goods"
}, function (data) {
  console.log(data);
  goodListBuild(data);
});
/*创建商品列表*/

function goodListBuild(sectionsData) {
  var _html_sections = '';
  $.each(sectionsData["product"], function (index, item) {
    var indd = 0;
    var loop = 8;
    var _html_ul = '';

    for (var i = indd; i < indd + loop; i++) {
      _html_ul += "\n<li class=\"product-item\">\n  <a href=\"http://10.36.135.7:3000/goods.html?".concat(sectionsData["product_link"][i], "\" class=\"product-link hoverStyle\">\n      <div class=\"product-img\">\n          <div class=\"cover\">\n              <img src=\"").concat(sectionsData["cover"][i], "\"\n                  alt=\"\">\n          </div>\n          <div class=\"hover\">\n              <img src=").concat(sectionsData["hover"][i], "\n                  alt=\"\">\n              <p class=\"product-des\">").concat(sectionsData["hoverText"][i], "</p>\n\n          </div>\n      </div>\n      <div class=\"product-title\">").concat(sectionsData["smallTitle"][i], "</div>\n      <div class=\"product-price\">").concat(sectionsData["price"][i], "</div>\n  </a>\n</li>\n");
    }

    indd += loop;
    _html_sections += "\n<div class=\"sections sections1\">\n    <div class=\"wrapx1200\">\n        <div class=\"sections-header\">\n            <h2 class=\"sections-header-title\">".concat(sectionsData["product"][index], "</h2>\n            <div class=\"sections-header-more\">\n                <a href=\"#\">\u66F4\u591A&gt;</a>\n            </div>\n        </div>\n        <div class=\"sections-main\">\n            <div class=\"content-grup content-grup1\">\n                <a href=\"http://10.36.135.7:3000/goods.html?").concat(sectionsData["product_link"][index], "\" class=\"hoverStyle\">\n                    <div class=\"images\">\n                        <img src=\"").concat(sectionsData["product_img"][index], "\"\n                            alt=\"\">\n                    </div>\n                    <div class=\"text\">\n                        <div class=\"product-title\">").concat(sectionsData["product_title"][index], "</div>\n                        <div class=\"product-des\">\n                            <p class=\"style__product-dese\">").concat(sectionsData["product_des"][index], "\n                            </p>\n                        </div>\n                        <div class=\"product-price\">").concat(sectionsData["product_price"][index], "</div>\n                    </div>\n                </a>\n            </div>\n            <div class=\"content-grup content-grup2\">\n                <video loop autoplay muted\n                    src=\"").concat(sectionsData["product_veido"][index], "\" poster=").concat(sectionsData["product_veidoPoster"][index], "></video>\n            </div>\n        </div>\n        <div class=\"section-container\">\n             <ul class=\"list\">").concat(_html_ul, "</ul>>\n        </div>\n    </div>\n</div>\n");
  });
  $('.shops-main').append(_html_sections);
}
/*ajax请求数据*/


function ajax(data, cb) {
  $.ajax({
    url: 'http://10.36.135.7:3000/json',
    type: 'get',
    data: data,
    dataType: "json",
    success: cb,
    error: function error(err) {
      console.log(err);
    }
  });
}